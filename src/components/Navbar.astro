---
const currentPath = Astro.url.pathname;
---
<header
  id="navbar"
  class="sticky top-0 z-50 bg-green-800 transition-all duration-300 shadow"
>
  <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
    <!-- Left: Logo + Brand Name -->
    <div class="flex items-center space-x-3">
      <a href="/" class="flex items-center">
        <img
          src="/india-flag-round-circle-icon.svg"
          alt="B2C Logo"
          class="rounded-full h-12 w-auto transition-transform duration-300 ease-in-out hover:scale-110"
        />
      </a>
      <span
        class="text-white font-medium tracking-tight hidden sm:block"
        style="font-family: 'Poppins'; font-size: clamp(1.1rem, 2vw, 1.7rem);"
      >
        B2C Foods
      </span>
    </div>

    <!-- Right: Desktop Nav -->
    <nav class="hidden md:flex space-x-8 text-md font-medium text-white">
      <a
        href="/"
        class="relative pb-0.4 after:content-[''] after:absolute after:left-0 after:bottom-0 after:h-[2px] after:w-0 after:bg-white after:transition-all after:duration-300 hover:after:w-full"
        style="font-family: 'Poppins'"
      >
        Home
      </a>
      {currentPath === "/" && (
        <a
          href="#CoreServices"
          class="relative pb-0.4 after:content-[''] after:absolute after:left-0 after:bottom-0 after:h-[2px] after:w-0 after:bg-white after:transition-all after:duration-300 hover:after:w-full"
          style="font-family: 'Poppins'"
        >
          Services
        </a>
      )}
      <a
        href="/projects"
        class="relative pb-0.4 after:content-[''] after:absolute after:left-0 after:bottom-0 after:h-[2px] after:w-0 after:bg-white after:transition-all after:duration-300 hover:after:w-full"
        style="font-family: 'Poppins'"
      >
        Projects
      </a>
      <a
        href="/schemes"
        class="relative pb-0.4 after:content-[''] after:absolute after:left-0 after:bottom-0 after:h-[2px] after:w-0 after:bg-white after:transition-all after:duration-300 hover:after:w-full"
        style="font-family: 'Poppins'"
      >
        Schemes
      </a>
    </nav>

    <!-- Right: Mobile Menu Button -->
    <button
      id="menu-btn"
      class="md:hidden text-white focus:outline-none"
      aria-label="Toggle Menu"
    >
      <!-- Hamburger Icon -->
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="h-6 w-6"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>
  </div>

  <!-- Mobile Menu (hidden by default) -->
  <div
    id="mobile-menu"
    class="hidden md:hidden flex-col space-y-4 px-4 pb-4 bg-green-800 text-white"
  >
    <a href="/" class="hover:text-green-300" style="font-family: 'Poppins'">
      Home
    </a>
    {currentPath === "/" && (
      <a href="#CoreServices" class="hover:text-green-300" style="font-family: 'Poppins'">
        Services
      </a>
    )}
    <a href="/projects" class="hover:text-green-300" style="font-family: 'Poppins'">
      Projects
    </a>
    <a href="/schemes" class="hover:text-green-300" style="font-family: 'Poppins'">
      Schemes
    </a>
  </div>
</header>

<script>
  // Scroll effect
  window.addEventListener("scroll", () => {
    const navbar = document.getElementById("navbar")!;
    if (window.scrollY > 50) {
      navbar.classList.add("bg-green-800/70", "backdrop-blur-md");
      navbar.classList.remove("bg-green-800");
    } else {
      navbar.classList.remove("bg-green-800/70", "backdrop-blur-md");
      navbar.classList.add("bg-green-800");
    }
  });

  // Mobile menu toggle
  const menuBtn = document.getElementById("menu-btn")!;
  const mobileMenu = document.getElementById("mobile-menu")!;
  menuBtn.addEventListener("click", () => {
    if (mobileMenu.classList.contains("hidden")) {
    mobileMenu.classList.remove("hidden");
    mobileMenu.classList.add("flex");
  } else {
    mobileMenu.classList.add("hidden");
    mobileMenu.classList.remove("flex")
  }});
</script>

